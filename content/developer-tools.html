<!doctype html><html lang="en"><head><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width,initial-scale=1"><meta name="description" content><meta name="author" content><link rel="icon" href="/favicon.ico"><base href="https://kyuubi.apache.org/"><title>Apache Kyuubi - Multi-tenant Thrift JDBC/ODBC server</title>
<link rel="stylesheet" href="/css/vendor/bootstrap.min.css"><link rel="stylesheet" href="/css/vendor/bootstrap-theme.min.css"><link rel="stylesheet" href="/css/vendor/semantic.min.css"><link rel="stylesheet" href="/css/homePage.css"><link rel="stylesheet" href="/css/kyuubi.css"></head><body><div id="nav_mask" class='nav_mask' style="display:none"></div><nav id="header" class="header"><a href="/en"><img class="navbar_logo" src="/kyuubi_logo_hd.png"></a><ul class="navContainer"><li class="navItem"><a class="navLink" href="releases.html">Download</a></li><li class="navItem"><a href="javascript:;" class="navLink navLinkWithChild" role="button" aria-haspopup="true" aria-expanded="false">Docs
<span class="navAngle"></span></a><div class="childNavContainer"><ul class="childNav"><li><a class="childNavLink" href="https://kyuubi.readthedocs.io/en/master/">master (dev-only)</a></li><li><a class="childNavLink" href="https://kyuubi.readthedocs.io/en/v1.11.0/">1.11.0
(latest)</a></li><li><a class="childNavLink" href="https://kyuubi.readthedocs.io/en/v1.10.3/">1.10.3</a></li><li><a class="childNavLink" href="https://kyuubi.readthedocs.io/en/v1.9.4/">1.9.4</a></li><li><a class="childNavLink" href="https://kyuubi.readthedocs.io/en/v1.8.3/">1.8.3</a></li><li><a class="childNavLink" href="https://kyuubi.readthedocs.io/en/v1.7.4/">1.7.4</a></li><li><a class="childNavLink" href="https://kyuubi.readthedocs.io/en/v1.6.1-incubating/">1.6.1-incubating</a></li><li><a class="childNavLink" href="https://kyuubi.readthedocs.io/en/v1.5.2-incubating/">1.5.2-incubating</a></li><li><a class="childNavLink" href="https://kyuubi.readthedocs.io/en/v1.4.1-incubating/">1.4.1-incubating</a></li><li><a class="childNavLink" href="https://kyuubi.readthedocs.io/en/v1.3.1-incubating/">1.3.1-incubating</a></li></ul></div></li><li class="navItem"><a href="javascript:;" class="navLink navLinkWithChild" role="button" aria-haspopup="true" aria-expanded="false">Community
<span class="navAngle"></span></a><div class="childNavContainer"><ul class="childNav"><li><a class="childNavLink" href="https://www.apache.org/foundation/policies/conduct">Code of Conduct</a></li><li><a class="childNavLink" href="/mailing_lists.html">Join the Mailing Lists</a></li><li><a class="childNavLink" href="/become_committer.html">Become A Committer</a></li><li><a class="childNavLink" href="/become_pmc_member.html">Become A PMC member</a></li><li><a class="childNavLink" href="/new_committer_process.html">Inviting New Committers</a></li><li><a class="childNavLink" href="/new_pmc_member_process.html">New PMC Member Process</a></li><li><a class="childNavLink" href="/project_history.html">Latest News</a></li></ul></div></li><li class="navItem"><a href="javascript:;" class="navLink navLinkWithChild" role="button" aria-haspopup="true" aria-expanded="false">Development
<span class="navAngle"></span></a><div class="childNavContainer"><ul class="childNav"><li><a class="childNavLink" href="/issue_tracking.html">Issue Tracker</a></li><li><a class="childNavLink" href="/pull_request.html">Pull Request</a></li><li><a class="childNavLink" href="/improvement-proposals.html">Improvement Proposals (KPIP)</a></li><li><a class="childNavLink" href="/developer-tools.html">Useful Developer Tools</a></li><li><a class="childNavLink" href="/version_control.html">Version Control</a></li></ul></div></li><li class="navItem"><a class="navLink" href="powered_by.html">Users</a></li><li class="navItem"><a href="javascript:;" class="navLink navLinkWithChild" role="button" aria-haspopup="true" aria-expanded="false">Github
<span class="navAngle"></span></a><div class="childNavContainer"><ul class="childNav"><li><a class="childNavLink" href="https://github.com/apache/kyuubi">kyuubi</a></li><li><a class="childNavLink" href="https://github.com/apache/kyuubi-client">kyuubi-client</a></li><li><a class="childNavLink" href="https://github.com/apache/kyuubi-docker">kyuubi-docker</a></li><li><a class="childNavLink" href="https://github.com/apache/kyuubi-website">kyuubi-website</a></li></ul></div></li><li class="navItem"><a href="javascript:;" class="navLink navLinkWithChild" role="button" aria-haspopup="true" aria-expanded="false">ASF
<span class="navAngle"></span></a><div class="childNavContainer"><ul class="childNav"><li><a class="childNavLink" href="https://www.apache.org/events/current-event">Events</a></li><li><a class="childNavLink" href="https://www.apache.org/">Foundation</a></li><li><a class="childNavLink" href="https://www.apache.org/licenses/">License</a></li><li><a class="childNavLink" href="https://privacy.apache.org/policies/privacy-policy-public.html">Privacy Policy</a></li><li><a class="childNavLink" href="https://www.apache.org/security/">Security</a></li><li><a class="childNavLink" href="https://www.apache.org/foundation/sponsorship.html">Sponsorship</a></li><li><a class="childNavLink" href="https://www.apache.org/foundation/thanks.html">Thanks</a></li></ul></div></li><li class="navItem"><a href="javascript:;" class="navLink navLinkWithChild" role="button" aria-haspopup="true" aria-expanded="false">Language
<span class="navAngle"></span></a><div class="childNavContainer"><ul class="childNav"><li><a class="childNavLink" href="https://kyuubi.apache.org/zh/developer-tools.html">简体中文</a></li></ul></div></li></ul><a class="shareImgContainer" href="https://www.apache.org/">Apache Software Foundation
<span class="shareImg"></span>
<img class="disappear" src="/share.png">
<img class="disappear" src="/activeShare.png"></a></nav><nav id="header_mobile" class="header_mobile"><a href="/"><img class="navbar_logo" src="/kyuubi_logo_hd.png"></a><div class="phoneBtn" id="phoneBtn"><span></span>
<span></span>
<span class="headerClose"></span></div><div class="mobileNavContainer"><ul class="navContainer"><li class="navItem"><a class="navLink" href="releases.html">Download</a></li><li class="navItem"><a href="javascript:;" class="navLink navLinkWithChild" role="button" aria-haspopup="true" aria-expanded="false">Docs
<span class="navAngle"></span></a><div class="childNavContainer"><ul class="childNav"><li><a class="childNavLink" href="https://kyuubi.readthedocs.io/en/master/">master (dev-only)</a></li><li><a class="childNavLink" href="https://kyuubi.readthedocs.io/en/v1.11.0/">1.11.0
(latest)</a></li><li><a class="childNavLink" href="https://kyuubi.readthedocs.io/en/v1.10.3/">1.10.3</a></li><li><a class="childNavLink" href="https://kyuubi.readthedocs.io/en/v1.9.4/">1.9.4</a></li><li><a class="childNavLink" href="https://kyuubi.readthedocs.io/en/v1.8.3/">1.8.3</a></li><li><a class="childNavLink" href="https://kyuubi.readthedocs.io/en/v1.7.4/">1.7.4</a></li><li><a class="childNavLink" href="https://kyuubi.readthedocs.io/en/v1.6.1-incubating/">1.6.1-incubating</a></li><li><a class="childNavLink" href="https://kyuubi.readthedocs.io/en/v1.5.2-incubating/">1.5.2-incubating</a></li><li><a class="childNavLink" href="https://kyuubi.readthedocs.io/en/v1.4.1-incubating/">1.4.1-incubating</a></li><li><a class="childNavLink" href="https://kyuubi.readthedocs.io/en/v1.3.1-incubating/">1.3.1-incubating</a></li></ul></div></li><li class="navItem"><a href="javascript:;" class="navLink navLinkWithChild" role="button" aria-haspopup="true" aria-expanded="false">Community
<span class="navAngle"></span></a><div class="childNavContainer"><ul class="childNav"><li><a class="childNavLink" href="https://www.apache.org/foundation/policies/conduct">Code of Conduct</a></li><li><a class="childNavLink" href="/mailing_lists.html">Join the Mailing Lists</a></li><li><a class="childNavLink" href="/become_committer.html">Become A Committer</a></li><li><a class="childNavLink" href="/become_pmc_member.html">Become A PMC member</a></li><li><a class="childNavLink" href="/new_committer_process.html">Inviting New Committers</a></li><li><a class="childNavLink" href="/new_pmc_member_process.html">New PMC Member Process</a></li><li><a class="childNavLink" href="/project_history.html">Latest News</a></li></ul></div></li><li class="navItem"><a href="javascript:;" class="navLink navLinkWithChild" role="button" aria-haspopup="true" aria-expanded="false">Development
<span class="navAngle"></span></a><div class="childNavContainer"><ul class="childNav"><li><a class="childNavLink" href="/issue_tracking.html">Issue Tracker</a></li><li><a class="childNavLink" href="/pull_request.html">Pull Request</a></li><li><a class="childNavLink" href="/improvement-proposals.html">Improvement Proposals (KPIP)</a></li><li><a class="childNavLink" href="/developer-tools.html">Useful Developer Tools</a></li><li><a class="childNavLink" href="/version_control.html">Version Control</a></li></ul></div></li><li class="navItem"><a class="navLink" href="powered_by.html">Users</a></li><li class="navItem"><a href="javascript:;" class="navLink navLinkWithChild" role="button" aria-haspopup="true" aria-expanded="false">Github
<span class="navAngle"></span></a><div class="childNavContainer"><ul class="childNav"><li><a class="childNavLink" href="https://github.com/apache/kyuubi">kyuubi</a></li><li><a class="childNavLink" href="https://github.com/apache/kyuubi-client">kyuubi-client</a></li><li><a class="childNavLink" href="https://github.com/apache/kyuubi-docker">kyuubi-docker</a></li><li><a class="childNavLink" href="https://github.com/apache/kyuubi-website">kyuubi-website</a></li></ul></div></li><li class="navItem"><a href="javascript:;" class="navLink navLinkWithChild" role="button" aria-haspopup="true" aria-expanded="false">ASF
<span class="navAngle"></span></a><div class="childNavContainer"><ul class="childNav"><li><a class="childNavLink" href="https://www.apache.org/events/current-event">Events</a></li><li><a class="childNavLink" href="https://www.apache.org/">Foundation</a></li><li><a class="childNavLink" href="https://www.apache.org/licenses/">License</a></li><li><a class="childNavLink" href="https://privacy.apache.org/policies/privacy-policy-public.html">Privacy Policy</a></li><li><a class="childNavLink" href="https://www.apache.org/security/">Security</a></li><li><a class="childNavLink" href="https://www.apache.org/foundation/sponsorship.html">Sponsorship</a></li><li><a class="childNavLink" href="https://www.apache.org/foundation/thanks.html">Thanks</a></li></ul></div></li><li class="navItem"><a href="javascript:;" class="navLink navLinkWithChild" role="button" aria-haspopup="true" aria-expanded="false">Language
<span class="navAngle"></span></a><div class="childNavContainer"><ul class="childNav"><li><a class="childNavLink" href="https://kyuubi.apache.org/zh/developer-tools.html">简体中文</a></li></ul></div></li></ul><a class="shareImgContainer" href="https://www.apache.org/">Apache Software Foundation
<span class="shareImg"></span>
<img class="disappear" src="/share.png">
<img class="disappear" src="/activeShare.png"></a></div></nav><script>var header_mobile,header,phoneBtn=document.getElementById("phoneBtn"),mask=document.getElementById("nav_mask");phoneBtn.addEventListener("click",function(){var t=mask.style.display!=="none";phoneBtn.className=t?"phoneBtn":"phoneBtn closeBtn",mask.style.display=t?"none":" block"}),mask.addEventListener("click",function(){phoneBtn.className="phoneBtn",mask.style.display="none"}),header_mobile=document.getElementById("header_mobile"),header_mobile.addEventListener("click",function(e){var t,n,s=e.target.className;s==="navLink navLinkWithChild"&&(t=e.target.parentNode,n=t.className!=="navItem",t.className=n?"navItem":"navItem openNavItem")}),header=document.getElementById("header"),window.onscroll=function(){var e=document.documentElement.scrollLeft||document.body.scrollLeft;header.style.left=-e+"px"}</script><div class="container"><h1>Useful Developer Tools</h1><h2 id="building-kyuubi">Building Kyuubi</h2><h3 id="building-kyuubi-with-apache-maven">Building Kyuubi with Apache Maven</h3><p><strong>Kyuubi</strong> is built based on <a href="http://maven.apache.org">Apache Maven</a>,</p><pre tabindex="0"><code>./build/mvn clean package -DskipTests
</code></pre><p>This results in the creation of all sub-modules of Kyuubi project without running any unit test.</p><p>If you want to test it manually, you can start Kyuubi directly from the Kyuubi project root by running</p><pre tabindex="0"><code>bin/kyuubi start
</code></pre><h3 id="building-a-submodule-individually">Building a Submodule Individually</h3><p>For instance, you can build the Kyuubi Common module using:</p><pre tabindex="0"><code>build/mvn clean package -pl :kyuubi-common -DskipTests
</code></pre><h3 id="building-submodules-individually">Building Submodules Individually</h3><p>For instance, you can build the Kyuubi Common module using:</p><pre tabindex="0"><code>build/mvn clean package -pl :kyuubi-common,:kyuubi-ha -DskipTests
</code></pre><h3 id="skipping-some-modules">Skipping Some modules</h3><p>For instance, you can build the Kyuubi modules without Kyuubi Codecov and Assembly modules using:</p><pre tabindex="0"><code>build/mvn clean install -pl &#39;!:kyuubi-codecov,!:kyuubi-assembly&#39; -DskipTests
</code></pre><h3 id="building-kyuubi-against-different-apache-spark-versions">Building Kyuubi against Different Apache Spark versions</h3><p>Since v1.1.0, Kyuubi support building with different Spark profiles,</p><table><thead><tr><th>Profile</th><th>Default</th><th>Since</th></tr></thead><tbody><tr><td>-Pspark-3.0</td><td>No</td><td>1.0.0</td></tr><tr><td>-Pspark-3.1</td><td>No</td><td>1.1.0</td></tr><tr><td>-Pspark-3.2</td><td>Yes</td><td>1.4.0</td></tr><tr><td>-Pspark-3.3</td><td>No</td><td>1.6.0</td></tr></tbody></table><h3 id="defining-the-apache-mirror-for-spark">Defining the Apache Mirror for Spark</h3><p>By default, we use <code>https://archive.apache.org/dist/spark/</code> to download the built-in Spark release package,
but if you find it hard to reach, or the downloading speed is too slow, you can define the <code>spark.archive.mirror</code>
property to a suitable Apache mirror site. For instance,</p><pre tabindex="0"><code>build/mvn clean package -Dspark.archive.mirror=https://mirrors.bfsu.edu.cn/apache/spark/spark-3.2.1
</code></pre><p>Visit <a href="http://www.apache.org/mirrors/">Apache Mirrors</a> and choose a mirror based on your region.</p><p>Specifically for developers in China mainland, you can use the pre-defined profile named <code>mirror-cdn</code> which use
<code>mirrors.bfsu.edu.cn</code> to speed up Spark Binary downloading. For instance,</p><pre tabindex="0"><code>build/mvn clean package -Pmirror-cn
</code></pre><h2 id="building-a-runnable-distribution">Building a Runnable Distribution</h2><p>To create a Kyuubi distribution like those distributed by <a href="https://github.com/apache/kyuubi/releases">Kyuubi Release Page</a>,
and that is laid out so as to be runnable, use <code>./build/dist</code> in the project root directory.</p><p>For more information on usage, run <code>./build/dist --help</code></p><pre tabindex="0"><code class="language-logtalk" data-lang="logtalk">./build/dist - Tool for making binary distributions of Kyuubi

Usage:
+------------------------------------------------------------------------------------------------------+
| ./build/dist [--name &lt;custom_name&gt;] [--tgz] [--flink-provided] [--spark-provided] [--hive-provided]  |
|              [--mvn &lt;maven_executable&gt;] &lt;maven build options&gt;                                        |
+------------------------------------------------------------------------------------------------------+
name:           -  custom binary name, using project version if undefined
tgz:            -  whether to make a whole bundled package
flink-provided: -  whether to make a package without Flink binary
spark-provided: -  whether to make a package without Spark binary
hive-provided:  -  whether to make a package without Hive binary
mvn:            -  external maven executable location
</code></pre><p>For instance,</p><pre tabindex="0"><code>./build/dist --name custom-name --tgz
</code></pre><p>This results a Kyuubi distribution named <code>kyuubi-{version}-bin-custom-name.tar.gz</code> for you.</p><p>If you are planing to deploy Kyuubi where <code>spark</code> is provided, in other word, it&rsquo;s not required to bundle spark binary, use</p><pre tabindex="0"><code>./build/dist --tgz --spark-provided
</code></pre><p>Then you will get a Kyuubi distribution without spark binary named <code>kyuubi-{version}-bin.tar.gz</code>.</p><h2 id="building-kyuubi-documentation">Building Kyuubi Documentation</h2><p>Follow the steps below and learn how to build the Kyuubi documentation as the one you are watching now.</p><h3 id="install--activate-virtualenv">Install & Activate <code>virtualenv</code></h3><p>Firstly, install <code>virtualenv</code>, this is optional but recommended as it is useful to create an independent environment to resolve dependency issues for building the documentation.</p><pre tabindex="0"><code>pip install virtualenv
</code></pre><p>Switch to the <code>docs</code> root directory.</p><pre tabindex="0"><code>cd $KTUUBI_HOME/docs
</code></pre><p>Create a virtual environment named &lsquo;kyuubi&rsquo; or anything you like using <code>virtualenv</code> if it&rsquo;s not existing.</p><pre tabindex="0"><code>virtualenv kyuubi
</code></pre><p>Activate it,</p><pre tabindex="0"><code> source ./kyuubi/bin/activate
</code></pre><h3 id="install-all-dependencies">Install all dependencies</h3><p>Install all dependencies enumerated in the <code>requirements.txt</code></p><pre tabindex="0"><code>pip install -r requirements.txt
</code></pre><h3 id="create-documentation">Create Documentation</h3><pre tabindex="0"><code>make html
</code></pre><p>If the build process succeed, the HTML pages are in <code>_build/html</code>.</p><h3 id="view-locally">View Locally</h3><p>Open the <code>_build/html/index.html</code> file in your favorite web browser.</p><h2 id="running-tests">Running Tests</h2><p><strong>Kyuubi</strong> can be tested based on <a href="http://maven.apache.org">Apache Maven</a> and the ScalaTest Maven Plugin,
please refer to the <a href="http://www.scalatest.org/user_guide/using_the_scalatest_maven_plugin">ScalaTest documentation</a>,</p><h3 id="running-tests-fully">Running Tests Fully</h3><p>The following is an example of a command to run all the tests:</p><pre tabindex="0"><code>./build/mvn clean test
</code></pre><h3 id="running-tests-for-a-module">Running Tests for a Module</h3><pre tabindex="0"><code>./build/mvn clean test -pl :kyuubi-common
</code></pre><h3 id="running-tests-for-a-single-test">Running Tests for a Single Test</h3><p>When developing locally, it’s convenient to run one single test, or a couple of tests, rather than all.</p><p>With Maven, you can use the -DwildcardSuites flag to run individual Scala tests:</p><pre tabindex="0"><code>./build/mvn  test -Dtest=none -DwildcardSuites=org.apache.kyuubi.service.FrontendServiceSuite
</code></pre><p>If you want to make a single test that need integrate with kyuubi-spark-sql-engine module, please build the package for kyuubi-spark-sql-engine module at first.</p><p>You can leverage the ready-made tool for creating a binary distribution.</p><pre tabindex="0"><code>./build/dist
</code></pre><h2 id="debugging-kyuubi">Debugging Kyuubi</h2><p>You can use the <a href="https://docs.oracle.com/javase/8/docs/technotes/guides/jpda/conninv.html#Plugin">Java Debug Wire Protocol</a> to debug Kyuubi
with your favorite IDE tool, e.g. Intellij IDEA.</p><h3 id="debugging-server">Debugging Server</h3><p>We can configure the JDWP agent in <code>KYUUBI_JAVA_OPTS</code> for debugging.</p><p>For example,</p><pre tabindex="0"><code>KYUUBI_JAVA_OPTS=-agentlib:jdwp=transport=dt_socket,server=y,suspend=y,address=5005 \
bin/kyuubi start
</code></pre><p>In the IDE, you set the corresponding parameters(host&amp;port) in debug configurations, for example,</p><div align=center><p><img src="../imgs/idea_debug.png"></p></div><h3 id="debugging-apps">Debugging Apps</h3><ul><li>Spark Driver</li></ul><pre tabindex="0"><code>spark.driver.extraJavaOptions   -agentlib:jdwp=transport=dt_socket,server=y,suspend=y,address=5005
</code></pre><ul><li>Spark Executor</li></ul><pre tabindex="0"><code>spark.executor.extraJavaOptions   -agentlib:jdwp=transport=dt_socket,server=y,suspend=y,address=5005
</code></pre><h2 id="developer-tools">Developer Tools</h2><h3 id="update-project-version">Update Project Version</h3><pre tabindex="0"><code>
build/mvn versions:set -DgenerateBackupPoms=false
</code></pre><h3 id="update-document-version">Update Document Version</h3><p>Whenever Project version updates, please also update the document version at <code>docs/conf.py</code> to target the upcoming release.</p><p>For example,</p><pre tabindex="0"><code>release = &#39;1.2.0&#39;
</code></pre><h3 id="update-dependency-list">Update Dependency List</h3><p>Kyuubi uses the <code>dev/dependencyList</code> file to indicates what upstream dependencies will actually go to the server-side classpath.</p><p>For Pull requests, a linter for dependency check will be automatically executed in GitHub Actions.</p><p>You can run <code>build/dependency.sh</code> locally first to detect the potential dependency change first.</p><p>If the changes look expected, run <code>build/dependency.sh --replace</code> to update <code>dev/dependencyList</code> in your Pull request.</p></div><footer class="footer"><div class="footerBox"><div class="footerItem"><a class="acevent" data-class="footerPcImg" data-format="wide" data-mode="dark" data-width="310"></a><a class="acevent" data-class="footerMobileImg" data-format="wide" data-mode="dark" data-width="114"></a><p>The Official Global Conference Series of The Apache Software Foundation, connecting open source technology enthusiasts from
around the world to share the latest technology developments and practices.</p></div><div class="footerBox"><div class="footerCopyRight">Copyright © 2021-2026 The Apache Software Foundation, Licensed under the Apache License, Version 2.0. Apache, the Apache Feather logo is trademarks of The Apache Software Foundation.</div></div></div></footer><script src="/js/vendor/jquery-1.12.4.min.js"></script><script src="/js/vendor/bootstrap.min.js"></script><script src="/js/vendor/semantic.min.js"></script><script src="https://www.apachecon.com/event-images/snippet.js"></script><script>$(function(){$("table").addClass("table table-striped")})</script></body></html>